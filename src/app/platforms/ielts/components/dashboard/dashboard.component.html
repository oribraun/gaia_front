<div class="dashboard" *ngIf="coursePlan" [ngClass]="{'dashboard-rtl': currentLang === 'he'}">
    <div class="my-row">
        <div class="my-col">
            <div class="panel-box panel-box-no-margin">
                <h4 class="header" translate>
                    My Plan
                </h4>
                <!-- <div class="text-body" [innerHTML]="coursePlan.description"></div> -->
                <div class="text-body plan-parts">
                    <div class="date"><small translate>Starting</small><br>{{coursePlan.start_date}}</div>
                    <div class="items">
                        <div class="item"
                             [ngClass]="{'active': currentCoursePlanPartIndex === i}"
                             (click)="selectCoursePart(i)" *ngFor="let p of coursePlan.parts; let i = index;" translate>{{p.title}}</div>
                    </div>
                    <div class="date"><small translate>Exam Date</small><br>{{coursePlan.end_date}}</div>
                </div>
                <div style="font-style:italic;" class="text-body" *ngIf="coursePlan.tip">Tip:  {{coursePlan.tip}}</div>
            </div>
            <div class="dynamic-part-area d-flex flex-row">
                <div class="left flex-fill">
                    <div class="d-flex flex-column">
                        <div class="part flex-fill" [ngClass]="'part-' + currentCoursePlanPartIndex">
                            <div class="panel-box">
                                <h4 class="header" translate>
                                    {{coursePlan.parts[currentCoursePlanPartIndex].title}}
                                </h4>
                                <div class="recommended-videos" *ngIf="practiceLessons && practiceLessons.length">
                                    <!-- <p>Recommended videos for this part:</p> -->
                                    <h5 class="practice_headline" translate>Practice Lessons</h5>
                                    <div class="videos-list">
                                        <div class="video" (click)="startVideoLesson(item.id, item.lesson_group_type_id)" *ngFor="let item of practiceLessons">
                                            <img [src]="item.presentation_data.presentation_lesson_data.presentation_thumbnail"
                                            alt="thumbnail"/>
                                            <!-- ORI - use this to mark video as completed: item.presentation_data.presentation_lesson_data.all_presentation_tasks_completed -->
                                            <div class="desc">{{item.presentation_data.presentation_lesson_data.presentation_title}}</div>
                                            <div class="status" *ngIf="item.status === 'Finished'">
                                                <i class="bi bi-check-circle-fill"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="recommended-videos" *ngIf="recommendedVideos && recommendedVideos.length">
                                    <!-- <p>Recommended videos for this part:</p> -->
                                    <h5 class="practice_headline" translate>Video Lessons</h5>
                                    <div class="videos-list">
                                        <div class="video" (click)="startVideoLesson(item.id, item.lesson_group_type_id)" *ngFor="let item of recommendedVideos">
                                            <img [src]="item.presentation_data.presentation_lesson_data.presentation_thumbnail"
                                            alt="thumbnail"/>
                                            <!-- ORI - use this to mark video as completed: item.presentation_data.presentation_lesson_data.all_presentation_tasks_completed -->
                                            <div class="desc">{{item.presentation_data.presentation_lesson_data.presentation_title}}</div>
                                            <div class="status" *ngIf="item.status === 'Finished'">
                                                <i class="bi bi-check-circle-fill"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="achievements flex-fill">
                            <div class="panel-box">
                                <h4 class="header d-flex justify-content-between">
                                    <span translate>Achievements</span>
                                    <span class="float-end">
                                        <button class="btn btn-light" (click)="gotTo('/ielts/review')" translate>Review my work</button>
                                    </span>
                                </h4>
                                <div class="text-body">
                                    <div class="d-flex flex-column flex-sm-row">
                                        <div class="lst">
                                            <ul>
                                                <li *ngFor="let l of achievements.labels; let i = index;" [ngStyle]="{'color':  achievements.colors[i]}">
                                                    <span class="text-dark" data-bs-toggle="tooltip" data-bs-placement="top" title="{{l.tip}}" data-bs-custom-class="gaia-tooltip">{{l.name}}</span>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="charts d-flex flex-row justify-content-center" *ngIf="achievements">
                                            <div class="chart-wrapper" *ngFor="let l of achievements.data | keyvalue;">
                                                <div class="chart">
                                                    <ng-container *ngIf="l.value">
                                                        <app-pie-chart
                                                            [labels]="achievementsLabels"
                                                            [data]="achievements.data[getString(l.key)]"
                                                            [colors]="achievements.colors"
                                                        ></app-pie-chart>
                                                    </ng-container>
                                                </div>
<!--                                                <h4 class="text text-center">{{l.key}}</h4>-->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="right flex-fill">
                    <div class="test-yourself">
                        <div class="panel-box">
                            <h4 class="header" translate>
                                Test yourself
                            </h4>
                            <div class="text-body" translate>
                                Taking test will help you better prepare to the upcoming exam and will help us customize the practice level.
                            </div>
                            <div class="text-body text-center">
                                <div class="take-test">
                                    <div class="icon" (click)="startNewUserLessonByName('test', $event)">
                                        <i class="bi bi-play-fill"></i>
                                    </div>
                                    <p translate>Take a test</p>
                                    <div class="table-responsive">
                                        <table class="table" *ngIf="userTests && userTests.length">
                                            <thead>
                                            <tr>
                                                <th scope="col" translate>Date</th>
                                                <th scope="col" translate>Grade</th>
                                                <th scope="col" translate>Review</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr *ngFor="let test of userTests">
                                                <td>{{test.created}}</td>
                                                <td>{{test.score}}</td>
                                                <td><a href="#" (click)="goToLesson(test.id, $event)"><span translate>Test</span> {{test.id}}</a></td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--        <div class="col-4">-->
            <!--            <div class="panel">-->
            <!--                <h4 class="header">-->
            <!--                    My Courses-->
            <!--                </h4>-->
            <!--                <div class="box" *ngFor="let g of groupTypes" (click)="selectCourse(g)">-->
            <!--                    <div class="headline">Practice {{g.name}}</div>-->
            <!--                    <div class="desc">Total finished {{courses[g.name].finished}} <small>of</small> {{courses[g.name].finished + courses[g.name].unfinished}}</div>-->
            <!--                </div>-->
            <!--                <div class="generic-loader-wrapper" *ngIf="gettingGroupTypes">-->
            <!--                    <div class="loader">-->
            <!--                        <div class="spinner-border">-->
            <!--                            <span class="sr-only"></span>-->
            <!--                        </div>-->
            <!--                    </div>-->
            <!--                </div>-->
            <!--            </div>-->
            <!--        </div>-->
            <!--        <div class="col-4">-->
            <!--            <div class="panel">-->
            <!--                <h4 class="header">-->
            <!--                    My Vocabulary-->
            <!--                </h4>-->
            <!--                <div class="text-body">-->
            <!--                    Here you can see all the important words learned during the course with links to the relevant text.-->
            <!--                    <a href="" onclick="event.preventDefault()">Click</a> here to print in out.-->
            <!--                </div>-->
            <!--                <div class="vocab-table">-->
            <!--                    <table class="table table-bordered">-->
            <!--                        &lt;!&ndash;                        <thead>&ndash;&gt;-->
            <!--                        &lt;!&ndash;                        <tr>&ndash;&gt;-->
            <!--                        &lt;!&ndash;                            <th scope="col">Date</th>&ndash;&gt;-->
            <!--                        &lt;!&ndash;                            <th scope="col">En</th>&ndash;&gt;-->
            <!--                        &lt;!&ndash;                            <th scope="col">He</th>&ndash;&gt;-->
            <!--                        &lt;!&ndash;                        </tr>&ndash;&gt;-->
            <!--                        &lt;!&ndash;                        </thead>&ndash;&gt;-->
            <!--                        <tbody>-->
            <!--                        <tr>-->
            <!--                            <td>-->
            <!--                                22.10.2023-->
            <!--                            </td>-->
            <!--                            <td>Lesson</td>-->
            <!--                            <td>שיעור</td>-->
            <!--                        </tr>-->
            <!--                        <tr>-->
            <!--                            <td>-->
            <!--                                22.10.2023-->
            <!--                            </td>-->
            <!--                            <td>Lesson</td>-->
            <!--                            <td>שיעור</td>-->
            <!--                        </tr>-->
            <!--                        <tr>-->
            <!--                            <td>-->
            <!--                                22.10.2023-->
            <!--                            </td>-->
            <!--                            <td>Lesson</td>-->
            <!--                            <td>שיעור</td>-->
            <!--                        </tr>-->
            <!--                        </tbody>-->
            <!--                    </table>-->
            <!--                </div>-->
            <!--            </div>-->
            <!--        </div>-->
            <!--        <div class="col-4">-->
            <!--            <div class="panel">-->
            <!--                <h4 class="header">-->
            <!--                    My Achievements-->
            <!--                </h4>-->
            <!--                <div class="text-body">-->
            <!--                    Strike: (How many days in a row you are practicing)-->
            <!--                </div>-->
            <!--                <div class="starts">-->
            <!--                    <div class="start">-->
            <!--                        <i class="bi bi-star-fill"></i>-->
            <!--                        <div class="start-fill" [ngStyle]="{'bottom': '75%'}"></div>-->
            <!--                    </div>-->
            <!--                    <div class="start">-->
            <!--                        <i class="bi bi-star-fill"></i>-->
            <!--                        <div class="start-fill" [ngStyle]="{'bottom': '75%'}"></div>-->
            <!--                    </div>-->
            <!--                    <div class="start">-->
            <!--                        <i class="bi bi-star-fill"></i>-->
            <!--                        <div class="start-fill" [ngStyle]="{'bottom': '53%'}"></div>-->
            <!--                    </div>-->
            <!--                </div>-->
            <!--                <div class="text-body">-->
            <!--                    Course Progress-->
            <!--                </div>-->
            <!--                <div class="achievements-progress-bar">-->
            <!--                    <div class="progress">-->
            <!--                        <div class="progress-bar text-dark" [ngStyle]="{'width': '25%'}">25%</div>-->
            <!--                    </div>-->
            <!--                </div>-->
            <!--                <div class="text-body">-->
            <!--                    Avg Grade: (No one can see it but you)-->
            <!--                </div>-->
            <!--                <div class="avg-grade progress">-->
            <!--                    7.3/10-->
            <!--                </div>-->
            <!--                <div class="buttons">-->
            <!--                    <button class="btn btn-primary">Review my work</button>-->
            <!--                </div>-->
            <!--            </div>-->
            <!--        </div>-->
        </div>
    </div>


    <!-- Modal -->
    <div class="modal fade" id="userLessonsModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content" *ngIf="currentCourseType">
                <div class="modal-header justify-content-center">
                    <h5 class="modal-title">{{currentCourseType.name | capitalize: 'word'}}</h5>
                </div>
                <div class="modal-body">
                    <!--                    <div class="start-new">-->
                    <!--                        <a (click)="startNewUserLesson($event)" href="">Start New</a>-->
                    <!--                    </div>-->
                    <div class="table-responsive">
                        <table class="table" *ngIf="currentCourseLessons && currentCourseLessons.length">
                        <thead>
                        <tr>
                            <th scope="col">&nbsp;</th>
                            <th scope="col" translate>Started Count</th>
                            <th scope="col" translate>last Started</th>
                            <th scope="col" translate>status</th>
                            <th scope="col" translate>score</th>
                            <th scope="col"></th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let item of currentCourseLessons">
                            <td>{{item.title}}</td>
                            <td>{{item.started_count}}</td>
                            <td>{{item.last_started ? item.last_started : '-'}}</td>
                            <td>{{statusMapping[item.status]}}</td>
                            <td>0</td>
                            <td>
                                <a (click)="onClickUserLesson($event, item.id)" href="" >
                                    <i class="bi bi-arrow-up-right-square"></i>
                                </a>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    </div>
                    <div class="generic-loader-wrapper" *ngIf="false">
                        <div class="loader">
                            <div class="spinner-border">
                                <span class="sr-only"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
