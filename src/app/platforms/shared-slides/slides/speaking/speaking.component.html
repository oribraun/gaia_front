<div class="speaking">
    <div class="generic-loader-wrapper" *ngIf="spinnerEnabled">
        <div class="loader">
            <div class="spinner-border">
                <span class="sr-only"></span>
            </div>
        </div>
    </div>
    <div class="chat general-box">
        <div class="outer-scroller">
            <div class="inner-scroller" #scroller>
                <div class="messages">
                    <ng-container *ngFor="let item of messages; let i = index">
                        <div class="message" [ngClass]="{'message-personal': item.type == 'user'}">
                            <!--                        <figure *ngIf="item.type != 'user'" class="avatar"><img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/156381/profile/profile-80.jpg" /></figure>-->
                            <span class="translate-icon"(click)="translate(i)">
                            <i class="bi bi-translate"></i>
                        </span>
                            <i class="text" *ngIf="!item.showTranslated">{{item.message}}</i>
                            <i class="text" *ngIf="item.showTranslated">{{item.translatedMessage}}</i>
                        </div>
                    </ng-container>
                </div>
            </div>
        </div>
    </div>
    <div class="ptt-button">
        <!-- <button class="btn"
                [ngClass]="{'btn-primary': speechRecognitionService.PTTInProgress, 'btn-default': !speechRecognitionService.PTTInProgress}"
                (mousedown)="onPTTPressDown()"
                (mouseup)="onPTTPressUp()"
                (touchstart)="onPTTPressDown()"
                (touchend)="onPTTPressUp()"
        >Press To Talk</button> -->
    </div>
    
    <div class="main-btn_rec">
        <div class="btn-rec-container" >
            <input type="checkbox" id="btn" />
            <label for="btn"></label>
            <ng-container *ngIf="recordingIsActive"><button (click)="stopAsr()" id="recording" class="Rec">Recording</button></ng-container>
            <ng-container *ngIf="!recordingIsActive"><button  (click)="startAsr()"  id="recording" class="notRec">Paused</button></ng-container>

        <!--   <div class="time">
            
            <div class="h_m"></div>
            <div class="s_ms"></div> 
            </div>-->
            <!-- <p class="tim" id="timer" >0</p> -->
        </div>
    </div>
    <div class="buttons">
        <button *ngIf="grades" class="btn btn-primary" (click)="openModal()">Show Report</button>
        <button class="btn btn-primary">Continue</button>
        <button class="btn btn-primary" (click)="gradeConversation()">Grade Conversation</button>
        <!-- <button class="btn btn-primary" (click)="startAsr()">Start ASR</button> -->
        <button class="btn btn-primary" (click)="showDetailedQuestionReview()">Detailed Review</button>
        <button class="btn btn-primary" (click)="nextQuestion()">Next Question</button>
        <button class="btn btn-primary" (click)="restartSession()">Restart</button>
    </div>
</div>
<!--modals-->
<div id="openModal-about" class="modalDialog" [ngClass]="{'modalDialog_target':modalActive}">
    <div>
       <a  title="Close"  (click)="closeModel()"class="close">X</a>
       <h2>Speaking Review</h2>
       <div [innerHTML]="grades"></div>
       <br>
       <h2>Score</h2>
       <p [innerHTML]="score"></p>
     </div>
 </div>

 <div id="openModal-about" class="modalDialog" [ngClass]="{'modalDialog_target':showDetailedQuestionReviewActive}">
    <div>
       <a  title="Close"  (click)="closeModel()"class="close">X</a>
       <h2>Speaking Detailed Questions/Answers Review</h2>
       <ng-container *ngFor="let item of detailedQuestionsReviewList; let i = index">
            <div>
                <div><span class="" >Question: </span><span class="" >{{item.teacher_question}}</span></div>
                <div><span class="" >Answer: </span><span class="" >{{item.student_response}}</span></div>
                <div><span class="" >Review: </span><span class="" >{{item.student_response_review}}</span></div>
                <div><span class="" >Alternative Improved Answer:</span><span class="" >{{item.alternative_response}}</span></div>
            </div>
            <span class="" >---</span>
        </ng-container>
     </div>
 </div>